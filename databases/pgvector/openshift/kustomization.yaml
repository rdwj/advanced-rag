apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# PGVector (PostgreSQL + pgvector extension) for vector storage
#
# Deploy to advanced-rag namespace:
#   oc apply -k databases/pgvector/openshift/
#
# Deploy to a different namespace (for testing):
#   oc new-project pgvector-test
#   oc apply -k databases/pgvector/openshift/ -n pgvector-test
#
# The namespace is NOT hardcoded here, allowing deployment to any namespace:
#   oc apply -k databases/pgvector/openshift/ -n your-namespace
#
# If you want to enforce a specific namespace, uncomment:
# namespace: advanced-rag

resources:
  - secret.yaml
  - configmap.yaml
  - pvc.yaml
  - deployment.yaml
  - service.yaml

labels:
  - pairs:
      app.kubernetes.io/part-of: advanced-rag
    includeSelectors: false

# Environment-specific overlays can be added here in the future:
# Example structure:
#   databases/pgvector/openshift/
#   ├── base/           # Move current files here
#   │   ├── kustomization.yaml
#   │   ├── deployment.yaml
#   │   └── ...
#   └── overlays/
#       ├── dev/
#       │   └── kustomization.yaml  # patches for dev (smaller resources)
#       ├── staging/
#       │   └── kustomization.yaml  # patches for staging
#       └── prod/
#           └── kustomization.yaml  # patches for prod (larger resources, replicas)
